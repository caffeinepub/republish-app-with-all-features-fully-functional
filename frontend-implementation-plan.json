{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Role-based access codes, doctor self-registration with departments, and customer support button",
  "requirements": [
    {
      "id": "REQ-3",
      "summary": "Update DoctorPortal registration form with security code field (2011) and department dropdown (15 fixed departments), and filter doctor dashboard cases by department",
      "acceptanceCriteria": [
        "Doctor registration form has a security code field and a department dropdown.",
        "Submitting with code other than 2011 shows an error and blocks registration.",
        "Submitting with code 2011 and a selected department creates the doctor profile.",
        "After login, the doctor dashboard filters cases to only show those matching their department.",
        "All 15 departments are available in the dropdown."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/DoctorPortal.tsx",
          "operation": "modify",
          "description": "Add a security code input field to the doctor registration form. Validate that the entered code is exactly '2011' before calling registerDoctor. Display an error message if the code is incorrect. Update the department dropdown to include all 15 fixed departments: Cardiology, Neurology, Orthopedics, Pediatrics, Dermatology, Radiology, Oncology, Psychiatry, Gastroenterology, Urology, ENT, Ophthalmology, Gynecology, General Surgery, Emergency Medicine. Pass the registrationCode parameter to the backend registerDoctor call. After login, ensure the CaseManagement component receives the doctor's department and filters cases to show only those matching that department."
        },
        {
          "path": "frontend/src/components/CaseManagement.tsx",
          "operation": "modify",
          "description": "Add optional department filter support. When rendered in doctor mode with a department prop, filter the displayed cases to only show those matching the doctor's department. Ensure the filtering logic compares the case's department field with the provided department value."
        },
        {
          "path": "frontend/src/hooks/useQueries.ts",
          "operation": "modify",
          "description": "Update the useRegisterDoctor mutation to accept and pass the registrationCode parameter to the backend registerDoctor function. Handle backend errors related to invalid registration codes and return user-friendly error messages using the formatError utility."
        }
      ]
    },
    {
      "id": "REQ-4",
      "summary": "Update AdminPortal to use passcode 1107 and display all doctors and cases in read-only mode with no edit/delete controls",
      "acceptanceCriteria": [
        "AdminPortal passcode is 1107.",
        "Admin dashboard shows all doctor profiles with name, department, and availability.",
        "Admin dashboard shows all cases across all departments.",
        "No add/edit/delete buttons are visible in admin view.",
        "Admin can view dashboards and stats."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/AdminPortal.tsx",
          "operation": "modify",
          "description": "Change the hardcoded admin passcode from the current value to '1107'. Ensure the passcode validation logic checks for exact match with '1107'. After successful authentication, pass a read-only flag or mode to the AdminDashboard component to indicate that no create/edit/delete operations should be visible."
        },
        {
          "path": "frontend/src/components/AdminDashboard.tsx",
          "operation": "modify",
          "description": "Accept a read-only mode prop. When in read-only mode, hide or disable any create/edit/delete buttons in the Doctor Management and Case Management tabs. Ensure all doctor profiles (name, department, availability) and all cases across all departments are displayed. Preserve the stats dashboard and tab navigation."
        },
        {
          "path": "frontend/src/components/DoctorManagement.tsx",
          "operation": "modify",
          "description": "Accept a read-only mode prop. When in read-only mode, hide the doctor registration form and the availability toggle buttons. Display only the list of existing doctors with their name, department, and availability status. Ensure the component still calls useGetAllDoctors to fetch the full doctor list."
        },
        {
          "path": "frontend/src/components/CaseManagement.tsx",
          "operation": "modify",
          "description": "Accept a read-only mode prop. When in read-only mode, hide the assign doctor and resolve case buttons. Display all cases across all departments with severity and status badges. Ensure the component still calls useGetAllEmergencyCases to fetch the full case list."
        }
      ]
    },
    {
      "id": "REQ-5",
      "summary": "Implement SupportButton as a floating circle button fixed to bottom-right that opens mailto link to satyamjha2553@gmail.com",
      "acceptanceCriteria": [
        "A floating circular button is visible on bottom-right of every page.",
        "Clicking the button opens mailto:satyamjha2553@gmail.com.",
        "Button has a support-related icon and accessible label.",
        "Button does not obscure critical UI elements."
      ],
      "file_operations": [
        {
          "path": "frontend/src/components/SupportButton.tsx",
          "operation": "create",
          "description": "Create a SupportButton React component that renders a circular button with a customer support icon (e.g., headset or chat bubble using Lucide React icons). Position the button fixed to the bottom-right corner of the viewport using Tailwind CSS classes (e.g., 'fixed bottom-4 right-4'). On click, open the user's default email client with mailto:satyamjha2553@gmail.com. Add an aria-label or title tooltip of 'Customer Support'. Use z-index to ensure the button appears above other content but does not obscure critical UI elements. Style the button with a circular shape, appropriate padding, background color, hover state, and shadow for visibility."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Import the SupportButton component. Render the SupportButton component as a sibling to the Outlet component so it appears on every page. Ensure the component is placed outside the main content flow so it floats independently across all routes."
        }
      ]
    }
  ]
}